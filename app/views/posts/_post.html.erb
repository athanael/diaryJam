<div class="post-card">
  <div class="post-header d-flex align-items-center justify-content-between">
    <div class="user-info d-flex align-items-center">
      <%# if post.user.avatar.present? %>
        <%#= image_tag post.user.avatar, alt: "User Avatar", class: "avatar avatar-circle" %>
      <%# else %>
        <%= image_tag "default-avatar.png", alt: "Default Avatar", class: "avatar avatar-circle" %>
      <%# end %>
      <div class="user-details">
        <h5 class="username"><%= post.user.username %></h5>
        <p class="time-ago"><%= time_ago_in_words(post.created_at) %> ago</p>
      </div>
    </div>

    <%# Show delete icon only for the post's owner %>
    <% if post.user == current_user %>
      <%= link_to '✖', post_path(post), method: :delete, data: { confirm: 'Are you sure you want to delete this post?' }, class: 'delete-icon' %>
    <% end %>
  </div>

  <div class="post-content">
    <p><strong><%= post.user.username %></strong> <%= truncate(post.content, length: 100) %>...</p>
  </div>

  <div class="post-media">
    <iframe src="https://open.spotify.com/embed/track/<%= post.track.spotify_id %>?utm_source=generator"
            width="100%" height="152" frameborder="0" allowfullscreen=""
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            loading="lazy" style="border-radius: 12px;"></iframe>
  </div>

  <div class="post-footer d-flex align-items-center">
    <span class="reaction">❤️ 😆 👏</span>
    <span class="likes">Cutsyifa and 15K others</span>
    <span class="comment-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
        <path d="M21.6 4.8C21.6 3.3 20.3 2 18.8 2H5.2C3.7 2 2.4 3.3 2.4 4.8V15.2C2.4 16.7 3.7 18 5.2 18H8V21.5C8 21.8 8.3 22 8.5 22C8.6 22 8.8 21.9 8.9 21.8L13.4 18H18.8C20.3 18 21.6 16.7 21.6 15.2V4.8zM18.8 16H12.9L10 18.2V16H5.2C4.6 16 4 15.4 4 14.8V4.8C4 4.2 4.6 3.6 5.2 3.6H18.8C19.4 3.6 20 4.2 20 4.8V14.8C20 15.4 19.4 16 18.8 16z"></path>
      </svg>
    </span>
  </div>
</div>
